/*!
 * ZUI: 排序 - v1.5.0 - 2017-03-14
 * http://zui.sexy
 * GitHub: https://github.com/easysoft/zui.git 
 * Copyright (c) 2017 cnezsoft.com; Licensed MIT
 */
+function(t,e,r){"use strict";if(!t.fn.droppable)return void console.error("Sortable requires droppable.js");var n="zui.sortable",o={selector:"li,div",dragCssClass:"invisible",sortingClass:"sortable-sorting"},s="order",a=function(e,r){var n=this;n.$=t(e),n.options=t.extend({},o,n.$.data(),r),n.init()};a.DEFAULTS=o,a.NAME=n,a.prototype.init=function(e){var r=this,n=r.$,o=r.options,a=o.selector,i=o.sortingClass,l=o.dragCssClass,f=o.reverse,d=function(e){e=e||r.getItems(1);var n=[];e.each(function(){var e=t(this).data(s);"number"==typeof e&&n.push(e)}),n.sort(function(t,e){return t-e});for(var o=e.length;n.length<o;)n.push(n.length?n[n.length-1]+1:0);f&&n.reverse(),e.each(function(e){t(this).data(s,n[e]).attr("data-"+s,n[e])})};d(),n.droppable({handle:o.trigger,target:a,selector:a,container:n,always:o.always,flex:!0,before:o.before,start:function(t){l&&t.element.addClass(l),r.trigger("start")},drag:function(t){if(n.addClass(i),t.isIn){var e=t.element,o=t.target,a=e.data(s),l=o.data(s);if(a==l)return;a>l?o[f?"after":"before"](e):o[f?"before":"after"](e);var u=r.getItems(1);d(u),r.trigger(s,{list:u,element:e})}},finish:function(t){l&&t.element&&t.element.removeClass(l),n.removeClass(i),r.trigger("finish",{list:r.getItems(1),element:t.element})}})},a.prototype.destroy=function(){that.$.droppable("destroy")},a.prototype.getItems=function(e){var r=this.$.children(this.options.selector).not(".drag-shadow");return e?r:r.map(function(){var e=t(this);return{item:e,order:e.data("order")}})},a.prototype.trigger=function(e,r){return t.zui.callEvent(this.options[e],r,this)},t.fn.sortable=function(e){return this.each(function(){var r=t(this),o=r.data(n),s="object"==typeof e&&e;o?"object"==typeof e&&o.reset():r.data(n,o=new a(this,s)),"string"==typeof e&&o[e]()})},t.fn.sortable.Constructor=a}(jQuery,window,document);