/*!
 * ZUI: 排序 - v1.6.0 - 2017-05-17
 * http://zui.sexy
 * GitHub: https://github.com/easysoft/zui.git 
 * Copyright (c) 2017 cnezsoft.com; Licensed MIT
 */
+function(t,e,r){"use strict";if(!t.fn.droppable)return void console.error("Sortable requires droppable.js");var o="zui.sortable",n={selector:"li,div",dragCssClass:"invisible",sortingClass:"sortable-sorting"},s="order",i=function(e,r){var o=this;o.$=t(e),o.options=t.extend({},n,o.$.data(),r),o.init()};i.DEFAULTS=n,i.NAME=o,i.prototype.init=function(){var e=this,r=e.$,o=e.options,n=o.selector,i=o.sortingClass,a=o.dragCssClass,l=o.reverse,u=function(r){r=r||e.getItems(1);var o=[];r.each(function(){var e=t(this).data(s);"number"==typeof e&&o.push(e)}),o.sort(function(t,e){return t-e});for(var n=r.length;o.length<n;)o.push(o.length?o[o.length-1]+1:0);l&&o.reverse(),r.each(function(e){t(this).data(s,o[e]).attr("data-"+s,o[e])})};u(),r.droppable({handle:o.trigger,target:n,selector:n,container:r,always:o.always,flex:!0,before:o.before,mouseButton:o.mouseButton,start:function(t){a&&t.element.addClass(a),e.trigger("start")},drag:function(t){if(r.addClass(i),t.isIn){var o=t.element,n=t.target,a=o.data(s),f=n.data(s);if(a==f)return;a>f?n[l?"after":"before"](o):n[l?"before":"after"](o);var d=e.getItems(1);u(d),e.trigger(s,{list:d,element:o})}},finish:function(t){a&&t.element&&t.element.removeClass(a),r.removeClass(i),e.trigger("finish",{list:e.getItems(1),element:t.element})}})},i.prototype.destroy=function(){this.$.droppable("destroy")},i.prototype.reset=function(){this.destroy(),this.init()},i.prototype.getItems=function(e){var r=this.$.children(this.options.selector).not(".drag-shadow");return e?r:r.map(function(){var e=t(this);return{item:e,order:e.data("order")}})},i.prototype.trigger=function(e,r){return t.zui.callEvent(this.options[e],r,this)},t.fn.sortable=function(e){return this.each(function(){var r=t(this),n=r.data(o),s="object"==typeof e&&e;n?"object"==typeof e&&n.reset():r.data(o,n=new i(this,s)),"string"==typeof e&&n[e]()})},t.fn.sortable.Constructor=i}(jQuery,window,document);