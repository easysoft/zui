<article>
  <p>漂浮消息允许在页面指定位置展示一个消息浮动在已有内容之上。此消息可以设置为自动关闭或者让用户自行决定关闭。漂浮消息不会打断用户当前操作，一般用于提示后台操作，或者针对用户的全局操作作出及时回应。</p>
</article>

<section>
  <header><h3>一般示例</h3></header>
  <article>
    <p>漂浮消息可以设置图标，并且可以决定是否显示关闭按钮。</p>
    <div class="example">
      <button class="btn btn-primary show-messager" type="button" data-content="这是一个浮动消息。" data-icon="bell" data-time="30000">显示漂浮消息</button>
    </div>
    <pre><code>// 点击按钮时显示漂浮消息
$('.btn').on('click', function() {
    new $.zui.Messager('这是一个浮动消息。', {
        icon: 'bell' // 定义消息图标
    }).show();
});</code></pre>
  </article>
</section>

<section>
  <header><h3>更改显示位置</h3></header>
  <article>
    <p>提供7个预设的显示位置。</p>
    <div class="example">
      <button class="btn show-messager" type="button" data-content="Hello!" data-icon="heart" data-placement="top">上方</button>
      <button class="btn show-messager" type="button" data-content="Hello!" data-icon="heart" data-placement="bottom">下方</button>
      <button class="btn show-messager" type="button" data-content="Hello!" data-icon="heart" data-placement="top-left">左上</button>
      <button class="btn show-messager" type="button" data-content="Hello!" data-icon="heart" data-placement="top-right">右上</button>
      <button class="btn show-messager" type="button" data-content="Hello!" data-icon="heart" data-placement="bottom-left">左下</button>
      <button class="btn show-messager" type="button" data-content="Hello!" data-icon="heart" data-placement="bottom-right">右下</button>
      <button class="btn show-messager" type="button" data-content="Hello!" data-icon="heart" data-placement="center">中间</button>
    </div>
    <pre><code>new $.zui.Messager('这是一个浮动消息。', {
    icon: 'heart',
    placement: 'center' // 定义显示位置
}).show();</code></pre>
  </article>
</section>

<section>
  <header><h3>颜色主题</h3></header>
  <article>
    <p>提供 8 种预设颜色主题。</p>
    <div class="example">
      <style>.messager-example {position: relative; margin-bottom: 10px; cursor: pointer;}</style>
      <div class="messager messager-example messager-default"><div class="messager-content">普通提示消息</div><div class="messager-actions"><button type="button" class="close action">&times;</button></div></div>
      <div class="messager messager-example messager-primary" data-type="info"><div class="messager-content">提示消息：主要</div><div class="messager-actions"><button type="button" class="close action">&times;</button></div></div>
      <div class="messager messager-example messager-info" data-type="info"><div class="messager-content"><i class="icon-info-sign"></i> 提示消息：信息</div><div class="messager-actions"><button type="button" class="close action">&times;</button></div></div>
      <div class="messager messager-example messager-danger" data-type="danger"><div class="messager-content"><i class="icon-exclamation-sign"></i>提示消息：危险</div><div class="messager-actions"><button type="button" class="close action">&times;</button></div></div>
      <div class="messager messager-example messager-success" data-type="success"><div class="messager-content"><i class="icon-ok-sign"></i> 提示消息：成功</div><div class="messager-actions"><button type="button" class="close action">&times;</button></div></div>
      <div class="messager messager-example messager-warning" data-type="warning"><div class="messager-content"><i class="icon-warning-sign"></i> 提示消息：警告</div><div class="messager-actions"><button type="button" class="close action">&times;</button></div></div>
      <div class="messager messager-example messager-important" data-type="important"><div class="messager-content">提示消息：重要</div><div class="messager-actions"><button type="button" class="close action">&times;</button></div></div>
      <div class="messager messager-example messager-special" data-type="special"><div class="messager-content">提示消息：特别</div><div class="messager-actions"><button type="button" class="close action">&times;</button></div></div>
    </div>
    <pre><code>new $.zui.Messager('提示消息：成功', {
    type: 'success' // 定义颜色主题
}).show();</code></pre>
  </article>
</section>

<section>
  <header><h3>自定义操作按钮</h3></header>
  <article>
    <p>默认会在右侧显示关闭按钮，如果需要禁用关闭按钮，将 <code>close</code> 选项设置为 <code>false</code>。</p>
    <div class="example">
      <button class="btn btn-primary show-messager" type="button" data-fade='false' data-scale='false' data-content="此消息无法关闭，5秒后自动关闭" data-time="5000" data-close="false">禁用关闭按钮</button>
    </div>
    <pre><code>new $.zui.Messager('此消息无法关闭，5秒后自动关闭', {
    close: false // 禁用关闭按钮
}).show();</code></pre>
    <p>通过 <code>actions</code> 对象来自定义一组操作。</p>
    <div class="example">
      <div class="messager messager-example messager-success" data-type="success" data-actions='{"cancel": {"icon": "undo", "text": "撤销"}}'><div class="messager-content"><i class="icon-ok-sign"></i> 你的邮件已成功发送。</div><div class="messager-actions"><button type="button" class="action action-cancel"><i class="icon-undo"></i> 撤销</button><button type="button" class="close action">&times;</button></div></div>
    </div>
    <pre><code>new $.zui.Messager('你的邮件已成功发送。', {
    type: 'success',
    close: true,
    actions: [{
        name: 'undo',
        icon: 'undo',
        text: '撤销',
        action: function() {  // 点击该操作按钮的回调函数
            console.log('你点击了撤销按钮。');
        }
    }]
});</code></pre>
    <p><code>actions</code> 参数为一个包含若干个操作定义对象，每个操作定义对象可取的属性值如下：</p>
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>属性</th>
          <th>可用值</th>
          <th>描述</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>name</code></td>
          <td><code>'close'</code></td>
          <td>该操作的名称，要求为全局唯一的全英文字符串</td>
        </tr>
        <tr>
          <td><code>icon</code></td>
          <td><code>ok-sign</code></td>
          <td>该操作的图标</td>
        </tr>
        <tr>
          <td><code>text</code></td>
          <td><code>'确认'</code></td>
          <td>操作显示的文本</td>
        </tr>
        <tr>
          <td><code>html</code></td>
          <td><code>'&lt;strong&gt;&#x597d;&lt;/strong&gt;'</code></td>
          <td>设置为操作按钮内的 HTML 代码，如果指定该属性，则 <code>icon</code> 和 <code>text</code> 属性会被忽略</td>
        </tr>
        <tr>
          <td><code>action</code></td>
          <td><code>[function]</code></td>
          <td>可选，当点击操作按钮时要调用的回调函数</td>
        </tr>
      </tbody>
    </table>
    <p><code>icon</code>、<code>text</code>、<code>html</code> 属性至少需要设置一项，否则操作按钮不可见。</p>
    <p>在操作定义对象的操作回调函数 <code>action</code> 中返回 <code>false</code> 来取消点击操作后的隐藏操作。</p>
    <pre><code>new $.zui.Messager('你的邮件已成功发送。', {
    type: 'success',
    close: true,
    actions: [{
        name: 'undo',
        icon: 'undo',
        text: '撤销',
        action: function() {  // 点击该操作按钮的回调函数
            return false; // 通过返回 false 来阻止消息被点击时隐藏
        }
    }]
});</code></pre>
    <p>如果在 <code>actions</code> 内已经定义 <code>name</code> 为 <code>'close'</code> 的操作，则 <code>close</code> 选项会被忽略。</p>
    <pre><code>new $.zui.Messager('你的邮件已成功发送。', {
    type: 'success',
    close: true, // 此选项会被忽略，因为已经在 actions 选项中指定了 name 值为 close 的操作
    actions: [{
        name: 'close',
        icon: 'remove'
    }]
});</code></pre>
    <p>监听点击操作另一个方法是使用 <code>onAction</code> 选项。</p>
    <pre><code>new $.zui.Messager('你的邮件已成功发送。', {
    type: 'success',
    actions: [{
        name: 'undo',
        icon: 'undo'
    }, {
        name: 'close',
        icon: 'remove'
    }],
    onAction: function(name, action, messager) {
        if(name === 'undo') {
            console.log('你点击了撤销按钮。');
        } else if(name === 'close') {
            console.log('你点击了关闭按钮。');
        }
    }
});</code></pre>
  </article>
</section>

<section>
  <header><h3>禁用动画效果</h3></header>
  <article>
    <div class="example">
      <button class="btn btn-primary show-messager" type="button" data-fade='false' data-scale='false' data-content="此消息没有动画效果。" data-icon="bell">禁用动画效果</button>
    </div>
    <pre><code>new $.zui.Messager('此消息没有动画效果。', {
    fade:  false,  // 禁用渐隐效果
    scale: false   // 禁用缩放动画
}).show();</code></pre>
  </article>
</section>

<section>
  <header><h3>如何使用</h3></header>
  <article>
    <h4>使用Messager对象</h4>
    <p>创建一个<code>Messager</code>实例来使用漂浮消息。</p>
    <table class="table table-bordered">
      <thead>
        <tr><th>方法</th><th>参数</th><th>定义</th></tr>
      </thead>
      <tbody>
        <tr>
          <td>构造函数</td>
          <td><ul>
            <li><code>message</code>，需要显示的消息文本，支持html；</li>
            <li><code>options</code>一个参数对象，具体参数定义见后续章节。</li>
          </ul></td>
          <td>创建新的Messager实例。</td>
        </tr>
        <tr>
          <td><code>show</code></td>
          <td><code>message</code>（可选），在显示时重新设置消息文本。</td>
          <td>立即显示消息</td>
        </tr>
        <tr>
          <td><code>hide</code></td>
          <td>无</td>
          <td>立即隐藏消息</td>
        </tr>
      </tbody>
    </table>
<pre class='prettyprint'><code>// 使用jQuery对象
var msg = new $.zui.Messager('消息内容', {placement: 'bottom'});

// 显示消息
msg.show();

// 隐藏消息
msg.hide();
</code></pre>
    <h4>快速显示</h4>
    <p>使用 <code>$.zui.messager</code> 实例的 <code>show()</code> 方法来即时显示一个漂浮消息。</p>
    <p>调用<code>$.zui.messager.show()</code>或者<code>$.zui.messager.show()</code>之后立即显示并返回新创建的<code>Messager</code>实例。可以使用返回的实例来手动执行<code>hide</code>方法隐藏此消息。</p>
    <p><code>show()</code>方法提供两个参数，定义于<code>Messager</code>构造函数参数定义相同。</p>
<pre class='prettyprint'><code>// 使用jQuery对象
var msg = $.zui.messager.show('消息内容', {placement: 'bottom'});
// 或使用 window 对象
// var msg = $.zui.messager.show('消息内容', {placement: 'bottom'});

// 隐藏消息
// msg.hide();
</code></pre>

    <h4>选项</h4>
    <table class="table table-bordered">
      <thead>
        <tr>
          <th>参数</th>
          <th>可选值</th>
          <th>说明</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td><code>type</code></td>
          <td><code>'default'</code>(默认)|<code>'primary'</code>|<code>'success'</code>|<code>'info'</code>|<code>'warning'</code>|<code>'danger'</code>|<code>'important'</code>|<code>'special'</code></td>
          <td>不同类型的消息对应使用不同的颜色展示。</td>
        </tr>
        <tr>
          <td><code>placement</code></td>
          <td><code>'top'</code>(默认)|<code>'bottom'</code>|<code>'top-left'</code>|<code>'top-right'</code>|<code>'bottom-left'</code>|<code>'bottom-right'</code>|<code>'center'</code></td>
          <td>决定消息显示的位置。</td>
        </tr>
        <tr>
          <td><code>time</code></td>
          <td>表示时间延迟，单位毫秒，默认为4000</td>
          <td>自显示之后超过此时间设定会自动隐藏消息。如果设置为0则不会自动隐藏。</td>
        </tr>
        <tr>
          <td><code>parent</code></td>
          <td><code>'body'</code></td>
          <td>一个jquery选择器，决定消息内容DOM的父节点。</td>
        </tr>
        <tr>
          <td><code>icon</code></td>
          <td><code>null</code></td>
          <td>可以额外制定一个图标在消息文本之前显示，图标定义参见“控件>图标”章节。</td>
        </tr>
        <tr>
          <td><code>close</code></td>
          <td><code>true</code>(默认)|<code>false</code></td>
          <td>如果为<code>true</code>，则在消息右侧显示一个关闭按钮，用户可以自行隐藏消息。</td>
        </tr>
        <tr>
          <td><code>fade</code></td>
          <td><code>true</code>(默认)|<code>false</code></td>
          <td>如果为<code>true</code>，则在显示和隐藏消息时使用渐隐渐显的动画效果。</td>
        </tr>
        <tr>
          <td><code>scale</code></td>
          <td><code>true</code>(默认)|<code>false</code></td>
          <td>如果为<code>true</code>，则在显示和隐藏消息时使用缩放的动画效果。</td>
        </tr>
        <tr>
          <td><code>actions</code></td>
          <td><code>[{action...}]</code>，默认不设置</td>
          <td>使用包含操作定义对象的数组来自定义操作按钮。</td>
        </tr>
        <tr>
          <td><code>onAction</code></td>
          <td><code>function(actionName, action, messager)</code>，默认不设置</td>
          <td>
            <p>当点击操作按钮时的回调函数，该回调函数的 <code>this</code> 指向当前所点击的按钮，参数定义如下：</p>
            <ul>
              <li><code>actionName</code>：操作的名称；</li>
              <li><code>action</code>：操作定义对象；</li>
              <li><code>messager</code>：当前的漂浮消息实例。</li>
            </ul>
          </td>
        </tr>
        <tr>
          <td><code>cssClass</code></td>
          <td><code>'my-messager'</code>，默认不设置</td>
          <td>为 <code>.messager</code> 追加额外的 CSS 类</td>
        </tr>
        <tr>
          <td><code>contentClass</code></td>
          <td><code>'my-messager-content'</code>，默认不设置</td>
          <td>为 <code>.messager-content</code> 追加额外的 CSS 类</td>
        </tr>
      </tbody>
    </table>
  </article>
</section>

<script>
function afterPageLoad() {
    $('#pageContent .show-messager').on('click', function()
    {
        var $this = $(this);
        var data = $this.data('zui.messager');
        if(data)
        {
            data.show(new Date());
        }
        else
        {
            var options = $this.data();
            if(typeof options.actions === 'string') options.actions = $.parseJSON(options.actions);
            $this.data('zui.messager', new $.zui.Messager(options.content, options).show());
        }
    });

    $('#pageContent .messager-example').click(function()
    {
        var $this = $(this);
        options = $this.data();
        if(typeof options.actions === 'string') options.actions = $.parseJSON(options.actions);
        new $.zui.Messager($this.find('.messager-content').html(), options).show();
    });
}
</script>
